<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap 101 Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="../../dist/css/bootstrap.css" rel="stylesheet">
    <style>
    /*
    body {
      font-family: "Lucida Sans Typewriter", "Lucida Console", Monaco, "Bitstream Vera Sans Mono", monospace;
    }
    */
    </style>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <canvas id="canvas" width="970" height="637">
    </div>
<!--
    <a href="https://github.com/pquerna/utc.tv"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
-->
    <img src="./tobias_television.png" id="img-tele" style="display: none">

    <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">
    function resizeCanvas() {
      var canvas = document.getElementById('canvas');
      var viewportWidth = window.innerWidth;
      var viewportHeight = window.innerHeight;
      var canvasWidth = 970;
      var canvasHeight = 637;

      canvas.style.position = "absolute";
      canvas.setAttribute("width", canvasWidth);
      canvas.setAttribute("height", canvasHeight);
      canvas.style.top = (viewportHeight - canvasHeight) / 2 + "px";
      canvas.style.left = (viewportWidth - canvasWidth) / 2 + "px";
    }

    function renderCanvas() {
      var c = document.getElementById("canvas");
      var img = document.getElementById("img-tele");
      var d = new Date();
      var dstr = "" + pad(d.getUTCHours()) + ":" + pad(d.getUTCMinutes()) + ":" + pad(d.getUTCSeconds());
      var x = c.width / 2;
      var y = (c.height / 2) + 40;
      var ctx = c.getContext("2d");

      ctx.fillStyle = 'white';
      ctx.drawImage(img,0,0);
      ctx.font="128px Lucida Sans Typewriter";
      ctx.drawImage(img,0,0);
      ctx.textAlign = 'center';
      ctx.fillText(dstr, x, y);
    }

    function calculcateOffset(din) {
      var currentms = Date.now().getTime();
      var dinms = din.getTime();
      var difference_ms = Math.abs(currentms - dinms);
      if (difference_ms > 30 * 1000) {
        
      }
    }

    function getOffset() {
      var xhr = $.ajax({
                  type: "GET",
                  url: "test.json", 
                  success: function(output, status) { 
                    alert((new Date(xhr.getResponseHeader("Date"))).getUTCHour());
                  },
                  error: function(output) {
                    alert((new Date(xhr.getResponseHeader("Date"))).getUTCHour());
                  }
                });
      
    }

    function pad(n){return n<10 ? '0'+n : ''+n}
    $( window ).resize(function() {
      resizeCanvas();
    });

    $( document ).ready(function() {
      resizeCanvas();
      renderCanvas();
      setInterval(function() {
        renderCanvas();
      }, 1000);
    });
    </script>
  </body>
</html>

